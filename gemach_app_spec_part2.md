# מרכז הגמ"חים - מפרט אפליקציה (חלק 2)

## יישום ופריסה

### סביבת פיתוח
- Node.js (גרסה 16 ומעלה)
- React 18
- TypeScript 4.9+
- Vite כ-bundler
- Supabase CLI להגדרות מקומיות
- ESLint ו-Prettier לפורמט קוד עקבי
- Git לניהול גרסאות

### סביבת שרת
- אחסון ב-Vercel או Netlify לחזית
- Supabase לבסיס נתונים ואחסון
- שילוב עם Cloudflare לשיפור ביצועים וHDN

### אסטרטגית פריסה
- CI/CD עם GitHub Actions
- בדיקות אוטומטיות לפני כל פריסה
- גרסאות סמנטיות לשחרורים
- סביבות נפרדות לפיתוח, בדיקות וייצור

## מיתוג ויצירתיות

### עיצוב לוגו
- סמל המשלב אלמנט של עזרה הדדית וקהילתיות
- צבעים: כחול עמוק (#1E40AF) וכתום חם (#F97316)
- גופן מודרני וקריא העולה בקנה אחד עם ערכי הקהילה

### מסרי שיווק
- "עוזרים זה לזה - מחברים בין צרכים למשאבים"
- "כל הגמ"חים במקום אחד - פשוט, מהיר, יעיל"
- "קהילה שעובדת יחד - לטובת כולם"

## שיפורים עתידיים

### צ'אט ישיר עם בעלי גמ"חים
- אפשרות לתקשורת ישירה בתוך האפליקציה
- שמירת היסטוריית שיחות
- התראות על הודעות חדשות

### מערכת הזמנות וניהול תורים
- יכולת להזמין פריטים מראש
- מערכת תורים לגמ"חים עם ביקוש גבוה
- אישורי הזמנה אוטומטיים

### אפליקציה לנייד
- פיתוח אפליקציה מבוססת React Native
- תמיכה ב-iOS ו-Android
- פונקציונליות מלאה גם במצב לא מקוון

### אפשרויות תרומה
- שילוב תשלומים מאובטחים לתרומות
- אפשרות לתרומות חד-פעמיות או קבועות
- דוחות שקיפות לתורמים

### מערכת מלאי/דיווח על זמינות
- עדכוני מלאי בזמן אמת
- התראות אוטומטיות כשפריטים חוזרים למלאי
- סטטיסטיקות שימוש וביקוש

### השוואת גמ"חים
- אפשרות להשוות בין גמ"חים דומים
- השוואת זמינות, תנאים ומרחק

### מערכת התראות למשתמש
- התראות מותאמות אישית
- עדכונים על גמ"חים חדשים בקטגוריות מועדפות
- תזכורות להחזרת פריטים

### אינטגרציה עם מערכות מיפוי מתקדמות
- הוראות ניווט מדויקות
- הערכת זמני הגעה
- אפשרות לתיאום ההגעה

### ניהול מלאי
- מערכת לניהול מלאי עבור בעלי גמ"חים
- מעקב אחר השאלות והחזרות
- סטטיסטיקות שימוש

### תמיכה במספר שפות
- עברית
- אנגלית
- יידיש

## טפסים וזרימות עבודה

### טופס הרשמת משתמש

**שדות נדרשים:**
- שם מלא (מחרוזת, 2-50 תווים)
- אימייל (תקין לפי תבנית אימייל)
- סיסמה (8 תווים לפחות, אות גדולה, מספר, תו מיוחד)
- אישור תנאי שימוש (boolean)

**שדות אופציונליים:**
- טלפון (מחרוזת, 10 ספרות)
- שכונה (בחירה מרשימה)
- תמונת פרופיל (קובץ תמונה, PNG/JPG, עד 5MB)

**כללי אימות:**
```typescript
import { z } from "zod";

const userSchema = z.object({
  fullName: z.string().min(2).max(50),
  email: z.string().email(),
  password: z.string().min(8).regex(/^(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])/),
  acceptTerms: z.literal(true),
  phone: z.string().regex(/^[0-9]{10}$/).optional(),
  neighborhood: z.string().optional(),
  profileImage: z.instanceof(File).optional(),
});
```

### טופס רישום גמ"ח

**שדות נדרשים:**
- שם הגמ"ח (מחרוזת, 2-100 תווים)
- קטגוריה (בחירה מרשימה)
- שכונה (בחירה מרשימה)
- כתובת (מחרוזת, 5-200 תווים)
- טלפון ראשי (מחרוזת, 10 ספרות)
- תיאור (מחרוזת, 20-1000 תווים)
- שעות פעילות (מבנה מורכב)

**שדות אופציונליים:**
- טלפון חלופי (מחרוזת, 10 ספרות)
- אימייל (תקין לפי תבנית אימייל)
- אתר (URL תקין)
- תשלום (boolean)
- תמונות (מערך של קבצי תמונה, עד 5 תמונות, PNG/JPG, עד 5MB כל אחת)
- תנאים מיוחדים (מחרוזת, עד 500 תווים)

**כללי אימות:**
```typescript
import { z } from "zod";

const operatingHoursSchema = z.object({
  sunday: z.object({ isOpen: z.boolean(), hours: z.string().optional() }),
  monday: z.object({ isOpen: z.boolean(), hours: z.string().optional() }),
  tuesday: z.object({ isOpen: z.boolean(), hours: z.string().optional() }),
  wednesday: z.object({ isOpen: z.boolean(), hours: z.string().optional() }),
  thursday: z.object({ isOpen: z.boolean(), hours: z.string().optional() }),
  friday: z.object({ isOpen: z.boolean(), hours: z.string().optional() }),
  saturday: z.object({ isOpen: z.boolean(), hours: z.string().optional() }),
});

const gemachSchema = z.object({
  name: z.string().min(2).max(100),
  category: z.string(),
  neighborhood: z.string(),
  address: z.string().min(5).max(200),
  phone: z.string().regex(/^[0-9]{10}$/),
  description: z.string().min(20).max(1000),
  operatingHours: operatingHoursSchema,
  alternativePhone: z.string().regex(/^[0-9]{10}$/).optional(),
  email: z.string().email().optional(),
  website: z.string().url().optional(),
  requiresPayment: z.boolean().default(false),
  images: z.array(z.instanceof(File)).max(5).optional(),
  specialConditions: z.string().max(500).optional(),
});
```

### טופס ביקורת

**שדות נדרשים:**
- דירוג (מספר, 1-5)

**שדות אופציונליים:**
- הערה (מחרוזת, עד 500 תווים)

**כללי אימות:**
```typescript
import { z } from "zod";

const reviewSchema = z.object({
  rating: z.number().min(1).max(5),
  comment: z.string().max(500).optional(),
});
```

### טופס חיפוש מתקדם

**שדות אופציונליים (כולם):**
- מילות חיפוש (מחרוזת)
- קטגוריה (בחירה מרשימה, מרובה)
- שכונה (בחירה מרשימה, מרובה)
- מרחק (מספר, בק"מ)
- שעות פעילות (בחירה מרשימה של ימים ושעות)
- סטטוס תשלום (boolean)
- דירוג מינימלי (מספר, 1-5)

**כללי אימות:**
```typescript
import { z } from "zod";

const searchSchema = z.object({
  query: z.string().optional(),
  categories: z.array(z.string()).optional(),
  neighborhoods: z.array(z.string()).optional(),
  distance: z.number().optional(),
  operatingDays: z.array(z.string()).optional(),
  paymentStatus: z.boolean().optional(),
  minRating: z.number().min(1).max(5).optional(),
});
```

## מבנה מפורט של עמודים

### עמוד הבית

**מבנה כללי:**
1. **מדור גיבור (Hero Section):**
   - כותרת ראשית: "מרכז הגמ"חים - עוזרים זה לזה"
   - משפט משנה: "המקום למצוא את כל הגמ"חים בקהילה"
   - חיפוש מהיר (שדה טקסט + כפתור)
   - כפתור "הוסף גמ"ח"

2. **קטגוריות פופולריות:**
   - 6-8 קטגוריות מובילות
   - כל קטגוריה עם אייקון וטקסט
   - מעבר לעמוד חיפוש עם הקטגוריה הנבחרת

3. **גמ"חים מומלצים:**
   - 4-6 כרטיסי גמ"ח
   - הצגת שם, שכונה, קטגוריה, דירוג
   - תמונה ממוזערת (אם קיימת)

4. **קריאה לפעולה (CTA):**
   - "יש לך גמ"ח? הרשם עכשיו ותן לאחרים למצוא אותך"
   - כפתור "הרשם כבעל גמ"ח"

5. **מידע נוסף:**
   - קצת על הפרויקט
   - מספרים (כמות גמ"חים, משתמשים, קטגוריות)
   - טיפים שימושיים

### עמוד חיפוש

**מבנה כללי:**
1. **חיפוש וסינון:**
   - שדה חיפוש
   - סינון לפי קטגוריה (רב-בחירה)
   - סינון לפי שכונה (רב-בחירה)
   - סינון לפי מרחק
   - סינון לפי שעות פעילות
   - סינון לפי תשלום/ללא תשלום
   - סינון לפי דירוג מינימלי
   - כפתור "אפס סינון"

2. **תצוגת תוצאות:**
   - אפשרות מעבר בין תצוגת רשימה למפה
   - מיון לפי רלוונטיות/מרחק/דירוג
   - הצגת כרטיסי גמ"ח
   - אינדיקציה לכמות התוצאות

3. **תצוגת מפה:**
   - מפת Google Maps עם סימוני מיקום
   - אפשרות ללחוץ על סימון לקבלת מידע בסיסי
   - אפשרות למעבר לעמוד הגמ"ח

### עמוד גמ"ח בודד

**מבנה כללי:**
1. **כותרת וחלק עליון:**
   - שם הגמ"ח
   - קטגוריה ושכונה
   - דירוג ממוצע ומספר ביקורות
   - כפתורים: "שמור למועדפים", "שתף"

2. **מידע יצירת קשר:**
   - טלפון ראשי (עם אפשרות להתקשר ישירות)
   - טלפון חלופי (אם קיים)
   - אימייל (אם קיים)
   - אתר (אם קיים)
   - כתובת (עם קישור למפה)

3. **תמונות:**
   - גלריית תמונות
   - אפשרות להגדלה

4. **תיאור:**
   - טקסט מלא של תיאור הגמ"ח
   - תנאים מיוחדים (אם יש)
   - האם דורש תשלום

5. **שעות פעילות:**
   - טבלה מסודרת של ימים ושעות
   - חיווי ברור לגבי יום הפעילות הנוכחי

6. **ביקורות:**
   - רשימת ביקורות (שם, תאריך, דירוג, הערה)
   - אפשרות להוספת ביקורת למשתמשים רשומים
   - דירוג ממוצע מסוכם

7. **גמ"חים דומים:**
   - 3-4 כרטיסי גמ"ח מאותה קטגוריה/שכונה

### עמוד רישום גמ"ח

**מבנה כללי:**
1. **תהליך בשלבים:**
   - אינדיקציה ויזואלית למיקום בתהליך
   - אפשרות לחזור לשלבים קודמים

2. **שלב 1: פרטים בסיסיים**
   - שם הגמ"ח
   - קטגוריה (בחירה מרשימה)
   - שכונה (בחירה מרשימה)
   - כתובת מדויקת
   - האם דורש תשלום (כן/לא)

3. **שלב 2: פרטי קשר**
   - טלפון ראשי
   - טלפון חלופי (אופציונלי)
   - אימייל (אופציונלי)
   - אתר (אופציונלי)

4. **שלב 3: שעות פעילות**
   - בחירת ימי פעילות
   - הגדרת שעות לכל יום
   - אפשרות להעתקת שעות בין ימים

5. **שלב 4: תיאור ותנאים**
   - תיאור מפורט של הגמ"ח
   - תנאים מיוחדים (אופציונלי)

6. **שלב 5: העלאת תמונות**
   - ממשק גרירה להעלאת תמונות
   - אפשרות להעלות עד 5 תמונות
   - תצוגה מקדימה ואפשרות למחיקה

7. **שלב 6: סיכום ואישור**
   - הצגת כל הפרטים שהוזנו
   - אישור סופי
   - מסך אישור עם פרטי הגמ"ח

### עמוד פרופיל משתמש

**מבנה כללי:**
1. **לשונית פרטים אישיים:**
   - פרטי המשתמש
   - אפשרות לעריכה
   - שינוי סיסמה

2. **לשונית הגמ"חים שלי:**
   - רשימת הגמ"חים שבבעלות המשתמש
   - אפשרויות ניהול (עריכה, מחיקה, השהייה)
   - הוספת גמ"ח חדש

3. **לשונית ביקורות:**
   - הביקורות שכתב המשתמש
   - אפשרות לעריכה/מחיקה

4. **לשונית מועדפים:**
   - גמ"חים שנשמרו כמועדפים
   - אפשרות להסרה

5. **לשונית הגדרות:**
   - העדפות התראות
   - ניהול פרטיות
   - אפשרויות נוספות

### עמוד התחברות והרשמה

**מבנה כללי:**
1. **מסך מפוצל:**
   - לשונית "התחברות"
   - לשונית "הרשמה"

2. **טופס התחברות:**
   - אימייל
   - סיסמה
   - "זכור אותי"
   - קישור לשחזור סיסמה
   - כפתור התחברות

3. **טופס הרשמה:**
   - שם מלא
   - אימייל
   - סיסמה
   - אימות סיסמה
   - אישור תנאי שימוש
   - כפתור הרשמה

4. **התחברות חברתית:**
   - Google
   - Facebook
   - Apple (אופציונלי)

### עמוד ניהול (Admin)

**מבנה כללי:**
1. **לוח מחוונים:**
   - סטטיסטיקות כלליות
   - גרפים פעילות
   - התראות מערכת

2. **ניהול גמ"חים:**
   - רשימת כל הגמ"חים
   - אפשרויות סינון וחיפוש
   - אישור גמ"חים חדשים
   - עריכה/מחיקה/השהייה

3. **ניהול משתמשים:**
   - רשימת משתמשים
   - פרטי משתמש
   - הרשאות
   - חסימת משתמשים

4. **ניהול תוכן:**
   - קטגוריות
   - שכונות
   - דפי מידע

5. **הגדרות מערכת:**
   - הגדרות כלליות
   - תחזוקת מערכת
   - גיבויים

## הנחיות לפיתוח

### הקמת הפרויקט
1. התקנת React עם TypeScript באמצעות Vite
2. הוספת Tailwind CSS
3. הגדרת תצורת ESLint ו-Prettier
4. הגדרת מבנה תיקיות

### קונפיגורציית Supabase
1. יצירת פרויקט חדש
2. הגדרת טבלאות ויחסים
3. הגדרת מדיניות Row Level Security (RLS)
4. הגדרת פונקציות ו-triggers
5. הגדרת אחסון קבצים

### מבנה תיקיות מוצע
```
src/
├── assets/
├── components/
│   ├── common/
│   ├── forms/
│   ├── layout/
│   └── pages/
├── context/
├── hooks/
├── lib/
│   ├── api/
│   ├── supabase/
│   └── utils/
├── pages/
├── styles/
├── types/
└── App.tsx
```

### בדיקות ואבטחת איכות
1. בדיקות יחידה עם Jest
2. בדיקות אינטגרציה עם Testing Library
3. בדיקות E2E עם Cypress
4. CI/CD באמצעות GitHub Actions

### תחזוקה והמשך פיתוח
1. תיעוד מקיף של הקוד
2. הגדרת לוגים ומעקב שגיאות
3. מפת דרכים לשיפורים עתידיים
4. אומדן זמן פיתוח: כ-500 שעות עבודה
5. תחזוקה שוטפת: כ-20 שעות בחודש 

## 9. טפסים

### 9.1 טופס רישום גמ"ח
**שדות חובה**:
- שם הגמ"ח (text)
- קטגוריה (select)
- שכונה (select)
- כתובת (text)
- טלפון ראשי (tel)
- תיאור (textarea)
- שעות פעילות (json)

**שדות אופציונליים**:
- טלפון חלופי (tel)
- אימייל (email)
- אתר אינטרנט (url)
- רשתות חברתיות (json)
- תמונות (file upload)
- מידע על תשלומים (textarea)
- הוראות הגעה (textarea)

**ולידציה**:
- שם: 2-100 תווים
- טלפון: פורמט ישראלי תקין
- אימייל: פורמט תקין
- תיאור: 50-1000 תווים
- תמונות: עד 5 תמונות, עד 5MB כל אחת

### 9.2 טופס התחברות
**שדות**:
- אימייל (email)
- סיסמה (password)
- זכור אותי (checkbox)

**ולידציה**:
- אימייל: פורמט תקין
- סיסמה: מינימום 8 תווים

### 9.3 טופס הרשמה
**שדות חובה**:
- שם מלא (text)
- אימייל (email)
- סיסמה (password)
- אימות סיסמה (password)

**שדות אופציונליים**:
- טלפון (tel)
- שכונה (select)

**ולידציה**:
- שם: 2-50 תווים
- אימייל: פורמט תקין
- סיסמה: מינימום 8 תווים, אות גדולה, אות קטנה, מספר
- טלפון: פורמט ישראלי תקין

### 9.4 טופס ביקורת
**שדות חובה**:
- דירוג (1-5 כוכבים)
- תאריך שימוש (date)

**שדות אופציונליים**:
- תיאור (textarea)
- תמונות (file upload)

**ולידציה**:
- תיאור: 10-500 תווים
- תמונות: עד 3 תמונות, עד 3MB כל אחת

## 10. תהליכי עבודה

### 10.1 תהליך רישום גמ"ח
1. משתמש מחובר נכנס לטופס רישום גמ"ח
2. ממלא את הפרטים הבסיסיים
3. מעלה תמונות (אופציונלי)
4. ממלא פרטים נוספים
5. שולח לאישור
6. מקבל אימייל אישור
7. מנהל מאשר/דוחה
8. מקבל התראה על אישור/דחייה

### 10.2 תהליך חיפוש גמ"ח
1. משתמש מזין פרמטרים לחיפוש
2. המערכת מציגה תוצאות ראשוניות
3. משתמש מסנן לפי:
   - קטגוריה
   - שכונה
   - מרחק
   - דירוג
   - מחיר
4. תוצאות מתעדכנות בזמן אמת
5. משתמש בוחר גמ"ח לצפייה מפורטת

### 10.3 תהליך הוספת ביקורת
1. משתמש מחובר נכנס לעמוד הגמ"ח
2. לוחץ על "הוסף ביקורת"
3. ממלא את הטופס
4. מעלה תמונות (אופציונלי)
5. שולח את הביקורת
6. הביקורת מוצגת בעמוד הגמ"ח

### 10.4 תהליך אישור גמ"ח
1. מנהל מקבל התראה על גמ"ח חדש
2. בודק את הפרטים:
   - תקינות המידע
   - איכות התמונות
   - התאמה לקטגוריה
3. מאשר או דוחה
4. שולח התראה למשתמש
5. מעדכן סטטיסטיקות

## 11. מימוש

### 11.1 סביבת פיתוח
- Node.js 18+
- npm 9+
- Git
- VS Code (מומלץ)
- Chrome DevTools

### 11.2 התקנה והפעלה
```bash
# התקנת תלויות
npm install

# הפעלת שרת פיתוח
npm run dev

# בנייה לייצור
npm run build

# הפעלת גרסת ייצור
npm run start
```

### 11.3 מבנה תיקיות
```
src/
├── app/                 # דפים ראשיים
├── components/          # קומפוננטות משותפות
├── lib/                 # פונקציות עזר
├── hooks/              # React hooks
├── types/              # TypeScript types
├── styles/             # קבצי CSS
└── utils/              # פונקציות שירות
```

### 11.4 תלויות עיקריות
```json
{
  "dependencies": {
    "react": "^18.2.0",
    "next": "^14.0.0",
    "typescript": "^5.0.0",
    "@supabase/supabase-js": "^2.0.0",
    "tailwindcss": "^3.0.0",
    "shadcn/ui": "^0.1.0",
    "zod": "^3.0.0",
    "react-hook-form": "^7.0.0",
    "date-fns": "^2.0.0"
  }
}
```

## 12. מיתוג

### 12.1 לוגו
- שם: "מרכז הגמ"חים"
- גופן: Heebo Bold
- צבע: כחול נייבי (#1E40AF)
- אייקון: סמל גמ"ח מודרני

### 12.2 צבעים
- **צבע ראשי**: כחול נייבי (#1E40AF)
  - מייצג אמינות, מקצועיות ואחדות
- **צבע משני**: תכלת (#3B82F6)
  - מייצג נגישות וחדשנות
- **צבע אקצנט**: כתום (#F97316)
  - מייצג חמימות ונדיבות

### 12.3 טיפוגרפיה
- **כותרות**: Heebo
  - מודרני, נקי וקריא
- **טקסט**: Assistant
  - נוח לקריאה בעברית

### 12.4 אייקונים
- סגנון: Line icons
- עובי: 2px
- צבע: תואם לסכמת הצבעים

## 13. שיפורים עתידיים

### 13.1 פונקציונליות
- מערכת הזמנות מקוונת
- אינטגרציה עם Waze/Google Maps
- מערכת תשלומים
- צ'אט בין משתמשים
- מערכת התראות
- דוחות וסטטיסטיקות למנהלי גמ"חים

### 13.2 טכני
- PWA תמיכה
- SEO משופר
- ביצועים משופרים
- תמיכה בשפות נוספות
- אינטגרציה עם רשתות חברתיות

### 13.3 UX/UI
- תצוגת מפה משופרת
- אנימציות מתקדמות
- תמיכה ב-dark mode
- נגישות משופרת
- תמיכה במסכים גדולים

## 14. תחזוקה

### 14.1 ניטור
- ניטור ביצועים
- ניטור שגיאות
- ניטור שימוש
- ניטור אבטחה

### 14.2 גיבויים
- גיבוי יומי של בסיס הנתונים
- גיבוי שבועי של קבצים
- שמירת גיבויים ל-30 יום

### 14.3 עדכונים
- עדכוני אבטחה אוטומטיים
- עדכוני תלויות חודשיים
- בדיקות תקינות אוטומטיות

## 15. אבטחה

### 15.1 אימות והרשאות
- אימות דו-שלבי
- JWT tokens
- הרשאות מבוססות תפקיד
- הגבלת ניסיונות התחברות

### 15.2 הגנת נתונים
- הצפנת נתונים רגישים
- הגנה מפני SQL injection
- הגנה מפני XSS
- הגנה מפני CSRF

### 15.3 אבטחת קבצים
- סריקת וירוסים
- הגבלת סוגי קבצים
- הגבלת גודל קבצים
- אחסון מאובטח 